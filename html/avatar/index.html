<!DOCTYPE html>
<head>
	<title>Avatar Marathon</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href='http://fonts.googleapis.com/css?family=Ruda' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700' rel='stylesheet' type='text/css'>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-55159746-1', 'auto');
		ga('require', 'displayfeatures');
		ga('send', 'pageview');
	</script>
</head>
<body>
	<div class="div_centered">
		<h1 class="text_title">Avatar Marathon</h1>
		<div class="body_text">
			<div class="countdown_div">
				<span id="countdown">9 Years, 300 Days, 00 Hours, 00m, 00s</span>
			</div>
			<div id="app">
				<h1 class="age-label">Years until the marathon of the best show ever on October 27th, 2025 at 7:00pm</h1>
				<span id="death">9</span><span id="seconds">9999999999</span>
			</div>

			<p class="igs_text">Set fourth on December 14th, 2015 at 8:06pm</p>
			<br>
		</div>
	</div>


	<script type="text/javascript">
		var target_date_final = new Date("October 27, 2025 19:00:00");
		var target_date = target_date_final.getTime();
		var years, days, hours, minutes, seconds, current_date, current_date2, seconds_left, seconds_left2, seconds_timer, seconds_fixed;
		var countdown = document.getElementById("countdown");
		var death = document.getElementById("death");
		var decimals = document.getElementById("seconds");

		setInterval(function one() {
			var current_year_final = new Date();
			var current_year = new Date().getFullYear();
			var target_year = target_date_final.getFullYear();

			current_date = new Date().getTime();
			seconds_left = (target_date - current_date) / 1000;

			//years = parseInt(seconds_left / 31557600);
			//seconds_left = seconds_left % 31557600;

			days = parseInt(seconds_left / 86400);
			seconds_left = seconds_left % 86400;
			hours = parseInt(seconds_left / 3600);
			seconds_left = seconds_left % 3600;
			minutes = parseInt(seconds_left / 60);
			seconds = parseInt(seconds_left % 60);


			current_date2 = new Date().getTime();
			seconds_left2 = (target_date - current_date2) / 1000;

			var average_days = 0;

			for (i = (current_year); i < target_year; i++) { 
				if (((i % 4 == 0) && (i % 100 != 0)) || (i % 400 == 0)){
					average_days += 366;
				}
				else {
					//Not a leap year
					average_days += 365;
				}
			}

			average_days = average_days/(target_year - current_year)


			seconds_timer = seconds_left2 / (60 * 60 * 24 * average_days);
			seconds_fixed = seconds_timer.toFixed(10);
			var split = seconds_fixed.toString().split('.');
			var years_final = split[0];
			death.innerHTML = years_final;
			decimals.innerHTML = "." + split[1];


			var isSameDay = (current_year_final.getDate() == target_date_final.getDate() && current_year_final.getMonth() == target_date_final.getMonth());

			//var isSameDay return date.toDateString() === target_date.toDateString();

			if (isSameDay) {
				current_year += 1;
			}

			for (i = (current_year); i < target_year; i++) { 
				if (((i % 4 == 0) && (i % 100 != 0)) || (i % 400 == 0)){
					days -= 366;
				}
				else {
					//Not a leap year
					days -= 365;
				}
			}



			countdown.innerHTML = years_final + " Years, " + days + " Days, " + hours + " Hours, "
			+ minutes + "m, " + seconds + "s";

		}, 100);
	</script>
</body>

